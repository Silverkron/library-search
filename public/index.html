<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aci Sant'Antonio Library - Online Catalog | Book Search</title>
    <meta name="description"
          content="Online catalog of the Municipal Library of Aci Sant'Antonio. Search thousands of books by title, author, publication year and inventory number.">
    <meta name="keywords"
          content="aci sant'antonio library, library catalog, aci sant'antonio books, book search, municipal library">

    <link rel="canonical" href="https://biblioteca.acisantantonio.org/">
    <link rel="alternate" hreflang="it" href="https://biblioteca.acisantantonio.org/it/">
    <link rel="alternate" hreflang="en" href="https://biblioteca.acisantantonio.org/">
    <link rel="alternate" hreflang="x-default" href="https://biblioteca.acisantantonio.org/">

    <meta property="og:title" content="Aci Sant'Antonio Library - Online Catalog">
    <meta property="og:description" content="Search thousands of books in the Municipal Library of Aci Sant'Antonio">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://biblioteca.acisantantonio.org/">
    <meta property="og:image" content="https://biblioteca.acisantantonio.org/ogimage.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">

    <meta name="twitter:title" content="Aci Sant'Antonio Library - Online Catalog">
    <meta name="twitter:description" content="Search thousands of books in the Municipal Library of Aci Sant'Antonio">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://biblioteca.acisantantonio.org/ogimage.png">

    <link rel="icon" type="image/png" href="./favicon.png">
    <link rel="icon" type="image/x-icon" href="./favicon.ico">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/lunr.js/2.3.9/lunr.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .transition-all {
            transition-property: all;
            transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
            transition-duration: 150ms;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-50 min-h-screen">
<div class="max-w-7xl mx-auto p-6">
    <!-- Header Section -->
    <header class="text-center mb-10">
        <h1 class="text-4xl font-bold text-gray-800 mb-2">Aci Sant'Antonio Municipal Library</h1>
        <h2 class="text-xl text-gray-600 mb-4">Online Catalog</h2>
        <div class="max-w-2xl mx-auto">
            <p class="text-gray-600 mb-4">
                This search system is a free and open source project, created to support the Municipal
                Library of Aci Sant'Antonio in its mission of spreading culture and promoting reading.
                Explore our catalog of thousands of volumes and discover the pleasure of reading.
            </p>
            <div class="text-sm text-gray-500 flex justify-center space-x-4">
                <a href="./hours-and-contacts" class="text-blue-600 hover:underline"
                   title="Hours and contacts of the Aci Sant'Antonio Library">
                    Hours and Contacts
                </a>
                <span class="text-gray-400">|</span>
                <a href="./location" class="text-blue-600 hover:underline"
                   title="Where to find the Aci Sant'Antonio Library">
                    Location
                </a>
                <span class="text-gray-400">|</span>
                <a href="https://github.com/Silverkron/library-search" class="text-blue-600 hover:underline"
                   title="GitHub page for the 'Library Search' repository for Aci Sant'Antonio"
                   target="_blank" rel="noopener noreferrer">
                    Open Source Project on GitHub
                </a>
                <span class="text-gray-400">|</span>
                <a href="./it/" class="text-blue-600 hover:underline"
                   title="Versione italiana">
                    Italiano
                </a>
            </div>
        </div>
    </header>

    <!-- Search Card -->
    <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- Full-text Search -->
            <div class="space-y-2">
                <label class="block text-sm font-medium text-gray-700">Full-text Search</label>
                <div class="relative">
                    <input
                            type="text"
                            id="fulltext-search"
                            placeholder="Search all fields..."
                            class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
                            aria-label="Full-text search in books"
                    >
                    <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
                        <svg class="h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                        </svg>
                    </div>
                </div>
            </div>

            <!-- Year Search -->
            <div class="space-y-2">
                <label class="block text-sm font-medium text-gray-700">Year</label>
                <input
                        type="number"
                        id="year-search"
                        placeholder="Publication year"
                        class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
                        aria-label="Search by publication year"
                >
            </div>

            <!-- Inventory Number -->
            <div class="space-y-2">
                <label class="block text-sm font-medium text-gray-700">Inventory Number</label>
                <input
                        type="number"
                        id="id-search"
                        placeholder="Inventory number"
                        class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
                        aria-label="Search by inventory number"
                >
            </div>
        </div>
    </div>

    <!-- Loading State -->
    <div id="loading" class="text-center py-16" role="status">
        <div class="inline-flex items-center px-4 py-2 border border-transparent text-base leading-6 font-medium rounded-md text-white bg-blue-600 shadow-sm transition ease-in-out duration-150 cursor-not-allowed">
            <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none"
                 viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor"
                      d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
            Loading catalog...
        </div>
    </div>

    <!-- Results Count -->
    <div id="results-count" class="mb-4 text-gray-600 hidden" role="status">
        <span class="font-medium text-blue-600"><span id="count">0</span></span> books found in the catalog
    </div>

    <!-- Results Table -->
    <div id="results-table" class="hidden">
        <div class="bg-white rounded-xl shadow-lg overflow-hidden">
            <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200" role="grid" aria-label="Search results">
                    <thead class="bg-gray-50">
                    <tr>
                        <th scope="col"
                            class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Inv.
                            No.
                        </th>
                        <th scope="col"
                            class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                            Title
                        </th>
                        <th scope="col"
                            class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                            Author
                        </th>
                        <th scope="col"
                            class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Year
                        </th>
                        <th scope="col"
                            class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                            Publisher
                        </th>
                    </tr>
                    </thead>
                    <tbody id="results-body" class="bg-white divide-y divide-gray-200">
                    <tr class="hover:bg-gray-50">
                        <td class="px-6 py-4 whitespace-nowrap text-sm">5553</td>
                        <td class="px-6 py-4 text-sm">Extraterrestri</td>
                        <td class="px-6 py-4 text-sm">Lethbridge Thomas</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm">1999</td>
                        <td class="px-6 py-4 text-sm">Stampa alternativa</td>
                    </tr>

                    <tr class="hover:bg-gray-50">
                        <td class="px-6 py-4 whitespace-nowrap text-sm">4981</td>
                        <td class="px-6 py-4 text-sm">Breve storia dei materiali scrittori dalle origini al XV secolo
                        </td>
                        <td class="px-6 py-4 text-sm">Pastena Carlo</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm">2001</td>
                        <td class="px-6 py-4 text-sm">regione siciliana.</td>
                    </tr>

                    <tr class="hover:bg-gray-50">
                        <td class="px-6 py-4 whitespace-nowrap text-sm">5987</td>
                        <td class="px-6 py-4 text-sm">Il libro schede didattiche</td>
                        <td class="px-6 py-4 text-sm">Leonardi Irene</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm">2007</td>
                        <td class="px-6 py-4 text-sm">Tip.Ricca</td>
                    </tr>

                    <tr class="hover:bg-gray-50">
                        <td class="px-6 py-4 whitespace-nowrap text-sm">3948</td>
                        <td class="px-6 py-4 text-sm">Computer è facile</td>
                        <td class="px-6 py-4 text-sm">Pentiraro Egidio</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm">1989</td>
                        <td class="px-6 py-4 text-sm">Laterza.</td>
                    </tr>

                    <tr class="hover:bg-gray-50">
                        <td class="px-6 py-4 whitespace-nowrap text-sm">462</td>
                        <td class="px-6 py-4 text-sm">Una religione antropologica</td>
                        <td class="px-6 py-4 text-sm">Stagnitta Antonino</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm">1979</td>
                        <td class="px-6 py-4 text-sm">E.D.I.</td>
                    </tr>

                    <tr class="hover:bg-gray-50">
                        <td class="px-6 py-4 whitespace-nowrap text-sm">1796</td>
                        <td class="px-6 py-4 text-sm">De nihilo</td>
                        <td class="px-6 py-4 text-sm">Noto Antonino</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm">1990</td>
                        <td class="px-6 py-4 text-sm">Assoc.C.Eleusi.</td>
                    </tr>

                    <tr class="hover:bg-gray-50">
                        <td class="px-6 py-4 whitespace-nowrap text-sm">1921</td>
                        <td class="px-6 py-4 text-sm">L'idea del teatro</td>
                        <td class="px-6 py-4 text-sm">Camillo Giulio</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm">1991</td>
                        <td class="px-6 py-4 text-sm">Sellerio.</td>
                    </tr>

                    <tr class="hover:bg-gray-50">
                        <td class="px-6 py-4 whitespace-nowrap text-sm">3615</td>
                        <td class="px-6 py-4 text-sm">Reincarnazione</td>
                        <td class="px-6 py-4 text-sm">s.a..</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm">1983</td>
                        <td class="px-6 py-4 text-sm">Bhaktivedanta.</td>
                    </tr>

                    <tr class="hover:bg-gray-50">
                        <td class="px-6 py-4 whitespace-nowrap text-sm">7844</td>
                        <td class="px-6 py-4 text-sm">Farsi l'oroscopo</td>
                        <td class="px-6 py-4 text-sm">Lewis Ursula</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm">1993</td>
                        <td class="px-6 py-4 text-sm">Fratelli Melita Editori</td>
                    </tr>

                    <tr class="hover:bg-gray-50">
                        <td class="px-6 py-4 whitespace-nowrap text-sm">7673</td>
                        <td class="px-6 py-4 text-sm">Scienza e percezione extra-sensoriale</td>
                        <td class="px-6 py-4 text-sm">Smythies J.</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm">1968</td>
                        <td class="px-6 py-4 text-sm">De Donato Editore</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Pagination -->
    <div id="pagination" class="mt-6 flex items-center justify-between hidden">
        <button
                id="prev-page"
                class="inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all"
                aria-label="Previous page"
        >
            <svg class="mr-2 h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
            </svg>
            Previous
        </button>
        <div class="hidden sm:flex justify-center flex-1">
            <p class="text-sm text-gray-700">
                Page <span class="font-medium text-blue-600" id="current-page">1</span>
                of <span class="font-medium text-blue-600" id="total-pages">1</span>
            </p>
        </div>
        <button
                id="next-page"
                class="inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all"
                aria-label="Next page"
        >
            Next
            <svg class="ml-2 h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
            </svg>
        </button>
    </div>

    <!-- Footer -->
    <footer class="mt-12 text-center text-sm text-gray-500">
        <p>Open source search system for the Municipal Library of Aci Sant'Antonio</p>
        <div class="mt-4 space-y-2">
            <p class="text-gray-600">
                The Municipal Library of Aci Sant'Antonio is an important cultural reference point for the territory.
                It offers consultation services, book loans, and organizes cultural events for the community.
            </p>
            <p class="space-x-4">
                <a href="https://github.com/Silverkron/library-search" class="text-blue-600 hover:underline"
                   title="GitHub page for the 'Library Search' repository for Aci Sant'Antonio"
                   target="_blank" rel="noopener noreferrer">
                    Contribute on GitHub
                </a>
                <span class="text-gray-400">|</span>
                <a href="https://www.comune.acisantantonio.ct.it/amministrazione/uffici/ufficio_19.html"
                   class="text-blue-600 hover:underline"
                   title="Official page of the Aci Sant'Antonio Library"
                   target="_blank"
                   rel="noopener noreferrer">
                    Visit the Library website
                </a>
            </p>
        </div>
    </footer>
</div>

<script>
    // Application state
    const state = {
        books: [],
        searchIndex: null,
        currentPage: 1,
        itemsPerPage: 10,
        filteredBooks: [],
        isLoaded: false,
        isSearching: false
    };

    // Debounced search function
    function debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
            const later = () => {
                clearTimeout(timeout);
                func(...args);
            };
            clearTimeout(timeout);
            timeout = setTimeout(later, wait);
        };
    }

    const debouncedSearch = debounce(updateResults, 300);

    function wildcardFn(token) {
        if (token.toString().length > 2) {
            return token.update(function (str) {
                return `${str}*`;
            });
        }
        return token;
    }

    // Initialize lunr.js for full-text search
    function initializeSearchIndex(books) {
        // Configura il pipeline di Lunr per gestire meglio le ricerche parziali
        lunr.Pipeline.registerFunction(wildcardFn, 'wildcard');

        state.searchIndex = lunr(function () {
            // Configura i campi con boost per dare più peso al titolo
            this.field('title', {boost: 10});
            this.field('author', {boost: 5});
            this.field('publisher', {boost: 2});

            // Aggiungi un campo di ricerca combinato
            this.field('all');

            // Disabilita lo stemming aggressivo
            this.pipeline.remove(lunr.stemmer);
            this.searchPipeline.remove(lunr.stemmer);

            // Aggiungi la funzione wildcard al pipeline
            this.pipeline.add(wildcardFn);
            this.searchPipeline.add(wildcardFn);

            this.ref('id');

            books.forEach(book => {
                // Crea un campo combinato per la ricerca
                const all = `${book.title || ''} ${book.author || ''} ${book.publisher || ''}`.toLowerCase();

                this.add({
                    id: book.id,
                    title: book.title || '',
                    author: book.author || '',
                    publisher: book.publisher || '',
                    all: all
                });
            });
        });
    }

    // Verifica se ci sono filtri attivi
    function hasActiveFilters() {
        return document.getElementById('fulltext-search').value ||
            document.getElementById('year-search').value ||
            document.getElementById('id-search').value;
    }

    // Load data asynchronously
    async function loadBooks() {
        try {
            // Nascondiamo il loading state dato che abbiamo già dei risultati
            document.getElementById('loading').classList.add('hidden');

            // Mostriamo subito la tabella e il conteggio
            document.getElementById('results-table').classList.remove('hidden');
            document.getElementById('results-count').classList.remove('hidden');
            document.getElementById('pagination').classList.remove('hidden');

            // Carichiamo i dati in background
            const response = await fetch('./books.json');
            state.books = await response.json();
            state.filteredBooks = state.books; // Inizializziamo filteredBooks con tutti i libri
            initializeSearchIndex(state.books);

            // Aggiorniamo lo stato
            state.isLoaded = true;

            // Aggiorniamo i risultati solo se c'è una ricerca in corso
            if (hasActiveFilters()) {
                updateResults();
            } else {
                // Aggiorniamo il conteggio totale
                document.getElementById('count').textContent = state.books.length;

                // Aggiorniamo la paginazione
                const totalPages = Math.ceil(state.books.length / state.itemsPerPage);
                document.getElementById('total-pages').textContent = totalPages;

                // Aggiorniamo lo stato dei pulsanti
                document.getElementById('prev-page').disabled = state.currentPage === 1;
                document.getElementById('next-page').disabled = state.currentPage === totalPages;
            }
        } catch (error) {
            console.error('Error loading books:', error);
        }
    }

    function performSearch(query) {
        if (!query || query.length < 2) {
            return state.books;
        }

        try {
            // Divide la query in termini
            const terms = query.toLowerCase().split(/\s+/);

            // Crea tre tipi di query:
            // 1. Termini originali con wildcard
            const originalQuery = terms.map(term => `*${term}*`).join(' ');

            // 2. Termini concatenati (per trovare parole unite)
            const concatenatedTerm = terms.join('');
            const concatenatedQuery = `*${concatenatedTerm}*`;

            // 3. Termini adiacenti (per trovare parole vicine)
            const adjacentQuery = terms.join(' ');

            // Combina le query con OR
            const finalQuery = `${originalQuery} OR all:${concatenatedQuery} OR all:${adjacentQuery}`;

            return state.searchIndex.search(finalQuery);
        } catch (e) {
            console.error('Errore durante la ricerca:', e);
            // Fallback a ricerca semplice in caso di errore
            return state.books.filter(book => {
                const searchText = (book.title + ' ' + book.author + ' ' + book.publisher).toLowerCase();
                const concatenatedQuery = query.toLowerCase().replace(/\s+/g, '');
                const searchTextNoSpaces = searchText.replace(/\s+/g, '');

                return query.toLowerCase().split(/\s+/).every(term => searchText.includes(term)) ||
                    searchTextNoSpaces.includes(concatenatedQuery);
            });
        }
    }

    // Update results based on filters
    function updateResults() {
        if (!state.isLoaded && hasActiveFilters()) {
            const tbody = document.getElementById('results-body');
            tbody.innerHTML = `
            <tr>
                <td colspan="5" class="px-6 py-4 text-center text-sm text-gray-500">
                    <div class="flex items-center justify-center space-x-2">
                        <svg class="animate-spin h-5 w-5 text-blue-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                        </svg>
                        <span>Loading database...</span>
                    </div>
                </td>
            </tr>
        `;
            return;
        }

        const fulltextQuery = document.getElementById('fulltext-search').value;
        const yearQuery = document.getElementById('year-search').value;
        const idQuery = document.getElementById('id-search').value;

        if (!hasActiveFilters() && !state.isLoaded) {
            return;
        }

        let filtered = state.books;

        if (fulltextQuery) {
            const searchResults = performSearch(fulltextQuery);
            const searchIds = new Set(searchResults.map(result => result.ref));
            filtered = filtered.filter(book => searchIds.has(book.id.toString()));
        }

        if (yearQuery) {
            filtered = filtered.filter(book => book.year === parseInt(yearQuery));
        }
        if (idQuery) {
            filtered = filtered.filter(book => book.id === parseInt(idQuery));
        }

        state.filteredBooks = filtered;
        state.currentPage = 1;
        renderResults();
    }

    // Render results in the table
    function renderResults() {
        if (!state.isLoaded && !hasActiveFilters()) {
            // Se non siamo caricati e non ci sono filtri, impostiamo filteredBooks ai dati statici
            const staticRows = document.getElementById('results-body').getElementsByTagName('tr');
            state.filteredBooks = Array.from(staticRows).map(row => {
                const cells = row.getElementsByTagName('td');
                return {
                    id: parseInt(cells[0].textContent),
                    title: cells[1].textContent,
                    author: cells[2].textContent,
                    year: parseInt(cells[3].textContent),
                    publisher: cells[4].textContent
                };
            });
        }

        const start = (state.currentPage - 1) * state.itemsPerPage;
        const end = start + state.itemsPerPage;
        const pageItems = state.filteredBooks.slice(start, end);

        // Update count
        document.getElementById('count').textContent = state.filteredBooks.length;

        // Update pagination
        const totalPages = Math.ceil(state.filteredBooks.length / state.itemsPerPage);
        document.getElementById('current-page').textContent = state.currentPage;
        document.getElementById('total-pages').textContent = totalPages;

        // Aggiorniamo lo stato dei pulsanti
        document.getElementById('prev-page').disabled = state.currentPage === 1;
        document.getElementById('next-page').disabled = state.currentPage === totalPages;

        // Render rows
        const tbody = document.getElementById('results-body');
        if (pageItems.length === 0) {
            tbody.innerHTML = `
            <tr>
                <td colspan="5" class="px-6 py-4 text-center text-sm text-gray-500">
                    No results found
                </td>
            </tr>
        `;
            return;
        }

        tbody.innerHTML = pageItems.map(book => `
        <tr class="hover:bg-gray-50">
            <td class="px-6 py-4 whitespace-nowrap text-sm">${book.id}</td>
            <td class="px-6 py-4 text-sm">${book.title}</td>
            <td class="px-6 py-4 text-sm">${book.author || ''}</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm">${book.year || ''}</td>
            <td class="px-6 py-4 text-sm">${book.publisher || ''}</td>
        </tr>
    `).join('');
    }

    // Event listeners
    document.getElementById('fulltext-search').addEventListener('input', debouncedSearch);
    document.getElementById('year-search').addEventListener('input', debouncedSearch);
    document.getElementById('id-search').addEventListener('input', debouncedSearch);

    document.getElementById('prev-page').addEventListener('click', () => {
        if (state.currentPage > 1) {
            state.currentPage--;
            renderResults();
        }
    });

    document.getElementById('next-page').addEventListener('click', () => {
        const totalPages = Math.ceil(state.filteredBooks.length / state.itemsPerPage);
        if (state.currentPage < totalPages) {
            state.currentPage++;
            renderResults();
        }
    });

    // Load data on startup
    loadBooks();
</script>
</body>
</html>
